---
import CommonImage from '@components/CommonImage.astro';

const { src, alt, classes, width, height, ...rest } = Astro.props;
---

<div class="container-img">
   <CommonImage {src} {alt} {width} {height} {classes} {...rest} />
</div>

<script>
import { isInViewport } from '@js/utils';

var cardImages = document.querySelectorAll(
   '.post-card-img'
) as NodeListOf<HTMLElement>;

cardImages.forEach((cardImage) => {
   const isInViewPort = isInViewport(cardImage, true);

   if (cardImage && isInViewPort) {
      cardImage.removeAttribute('loading');
   }
});
</script>

<style>
   .container-img {
      flex-shrink: 0;
      border-radius: 5px;
      position: relative;
      width: 125px;
      height: 90px;
      display: flex;
      align-self: flex-start;
      margin-right: auto;

      img {
         width: 100%;
         height: 100%;
         border-radius: 5px;
      }
   }

   @media screen and (width <= 650px) {
      .container-img {
         display: none;
         height: 0;
         visibility: hidden;
      }
   }
</style>
