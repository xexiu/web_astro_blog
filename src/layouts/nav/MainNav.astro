---
import { Link } from '@components/common/link';
import data from '@schemas/main-nav-data.json';
import { Icon } from 'astro-icon';
import logo from '../../../public/logo.png';
import CommonImage from '@components/CommonImage.astro';
import './main-nav.css';
---

<p class="logo">
   <a href="/" aria-label="Inicio"
   ><CommonImage classes="logo-img" src={logo} alt="Logo" width={100} height={62} /></a>
</p>
<input type="checkbox" id="click" />
<label for="click" class="menu-btn">
   <Icon name="jam:menu" height="36" width="36" />
</label>

<xe-navigation-main data-main-nav>
   <nav class="header-main-nav" aria-label="NavagaciÃ³n Principal">
      <ul class="nav__links">
         {
            data.map((item) => (
               <li>
                  <Link
                     text={item.name}
                     href={item.path}
                     style="primary"
                     isFilled={false}
                     data-navLink
                     aria-label={item.name}
                  />
               </li>
            ))
         }
      </ul>
   </nav>
</xe-navigation-main>

<script>
   import { markAsCurrentPage } from '@js/utils';

   class NavigationMain extends HTMLElement {
      constructor() {
         super();
         const links = this.querySelectorAll('[data-navlink]');

         const timer = setTimeout(() => {
            markAsCurrentPage(links);
            clearTimeout(timer);
         }, 10);
      }
   }

   customElements.define('xe-navigation-main', NavigationMain);
</script>
